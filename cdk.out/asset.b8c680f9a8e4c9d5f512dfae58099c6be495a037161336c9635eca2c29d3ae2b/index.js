"use strict";var o=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var u=(e,r)=>{for(var s in r)o(e,s,{get:r[s],enumerable:!0})},m=(e,r,s,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of c(r))!g.call(e,a)&&a!==s&&o(e,a,{get:()=>r[a],enumerable:!(i=l(r,a))||i.enumerable});return e};var h=e=>m(o({},"__esModule",{value:!0}),e);var C={};u(C,{handler:()=>p});module.exports=h(C);var n=require("@aws-sdk/client-cognito-identity-provider"),t=require("@aws-sdk/client-ses"),S=new n.CognitoIdentityProvider({region:"us-west-1"}),d=new t.SESClient({region:"us-west-1"}),p=async e=>{let r;if(!e.request.session||!e.request.session.length){r=Math.floor(1e5+Math.random()*9e5).toString();try{await d.send(new t.SendEmailCommand({Destination:{ToAddresses:[e.request.userAttributes.email]},Message:{Body:{Text:{Data:`Your ASA Racing verification code is: ${r}`}},Subject:{Data:"Your ASA Racing Verification Code"}},Source:"admin@asaracing.live"})),e.response.privateChallengeParameters={secretLoginCode:r},e.response.publicChallengeParameters={email:e.request.userAttributes.email},e.response.challengeMetadata=r}catch(s){throw console.error("Error in create-auth-challenge:",s),s}}else r=e.request.session.slice(-1)[0].challengeMetadata||"INVALID",e.response.privateChallengeParameters={secretLoginCode:r},e.response.publicChallengeParameters={email:e.request.userAttributes.email},e.response.challengeMetadata=r;return e};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
