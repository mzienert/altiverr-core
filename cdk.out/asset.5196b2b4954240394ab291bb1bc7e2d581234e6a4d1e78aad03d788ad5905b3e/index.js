"use strict";var i=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var u=(r,e)=>{for(var s in e)i(r,s,{get:e[s],enumerable:!0})},y=(r,e,s,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of c(e))!d.call(r,t)&&t!==s&&i(r,t,{get:()=>e[t],enumerable:!(o=a(e,t))||o.enumerable});return r};var l=r=>y(i({},"__esModule",{value:!0}),r);var A={};u(A,{handler:()=>g});module.exports=l(A);var n={"Access-Control-Allow-Origin":"https://www.asaracing.live","Access-Control-Allow-Methods":"OPTIONS,POST,GET","Access-Control-Allow-Headers":"Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,Origin,Accept,Referer","Access-Control-Allow-Credentials":"true"},g=async r=>{if(r.httpMethod==="OPTIONS")return{statusCode:200,headers:n,body:""};try{if(r.resource==="/auth/manage-session/verify"){let o=r.headers.Cookie||r.headers.cookie;return{statusCode:200,headers:n,body:JSON.stringify({cookiesPresent:!!o,cookies:o?h(o):null})}}if(!r.body)return{statusCode:400,headers:n,body:JSON.stringify({message:"Missing request body"})};let{accessToken:e,idToken:s}=JSON.parse(r.body);return!e||!s?{statusCode:400,headers:n,body:JSON.stringify({message:"Missing required tokens"})}:{statusCode:200,headers:{...n,"Set-Cookie":[`accessToken=${e}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`,`idToken=${s}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`].join("; ")},body:JSON.stringify({success:!0})}}catch(e){return console.error("Error:",e),{statusCode:500,headers:n,body:JSON.stringify({message:"Internal server error"})}}};function h(r){return r.split(";").map(e=>e.trim()).reduce((e,s)=>{let[o,t]=s.split("=");return e[o]=t,e},{})}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
