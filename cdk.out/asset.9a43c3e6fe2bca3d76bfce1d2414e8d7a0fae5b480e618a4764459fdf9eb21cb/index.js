"use strict";var n=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var i=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var l=(o,e)=>{for(var s in e)n(o,s,{get:e[s],enumerable:!0})},d=(o,e,s,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of i(e))!c.call(o,r)&&r!==s&&n(o,r,{get:()=>e[r],enumerable:!(t=a(e,r))||t.enumerable});return o};var u=o=>d(n({},"__esModule",{value:!0}),o);var A={};l(A,{handler:()=>g});module.exports=u(A);var g=async o=>{let e={"Access-Control-Allow-Origin":o.headers.origin||"https://www.asaracing.live","Access-Control-Allow-Methods":"GET,POST,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,Origin,Access-Control-Request-Method,Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Access-Control-Max-Age":"300"};console.log("Lambda started"),console.log("Event:",JSON.stringify(o,null,2)),process.on("uncaughtException",s=>{console.error("Uncaught Exception:",s)}),process.on("unhandledRejection",s=>{console.error("Unhandled Rejection:",s)});try{if(o.httpMethod==="OPTIONS")return{statusCode:200,headers:e,body:""};if(o.resource==="/auth/manage-session/verify"){let r=o.headers.Cookie||o.headers.cookie;return{statusCode:200,headers:e,body:JSON.stringify({cookiesPresent:!!r,cookies:r?y(r):null})}}if(!o.body)return{statusCode:400,headers:e,body:JSON.stringify({message:"Missing request body"})};let{accessToken:s,idToken:t}=JSON.parse(o.body);return!s||!t?{statusCode:400,headers:e,body:JSON.stringify({message:"Missing required tokens"})}:{statusCode:200,headers:{"Access-Control-Allow-Origin":"https://www.asaracing.live","Access-Control-Allow-Methods":"GET,POST,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,Origin,Access-Control-Request-Method,Access-Control-Request-Headers","Access-Control-Allow-Credentials":"true","Access-Control-Max-Age":"300","Set-Cookie":[`accessToken=${s}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`,`idToken=${t}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`].join("; ")},body:JSON.stringify({success:!0})}}catch(s){return console.error("Error in handler:",s),{statusCode:500,headers:e,body:JSON.stringify({message:"Internal server error",error:s instanceof Error?s.message:String(s)})}}finally{console.log("Lambda finished")}};function y(o){return o.split(";").map(e=>e.trim()).reduce((e,s)=>{let[t,r]=s.split("=");return e[t]=r,e},{})}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
