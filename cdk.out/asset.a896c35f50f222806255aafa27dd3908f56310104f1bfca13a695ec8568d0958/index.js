"use strict";var a=Object.defineProperty;var n=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var u=(e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})},c=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of d(t))!l.call(e,s)&&s!==r&&a(e,s,{get:()=>t[s],enumerable:!(o=n(t,s))||o.enumerable});return e};var h=e=>c(a({},"__esModule",{value:!0}),e);var g={};u(g,{handler:()=>y});module.exports=h(g);var y=async e=>{let t=["https://www.asaracing.live","http://localhost:3000"],r=e.headers.origin||"https://www.asaracing.live",o={"Access-Control-Allow-Origin":t.includes(r)?r:"https://www.asaracing.live","Access-Control-Allow-Credentials":"true","Access-Control-Allow-Methods":"GET,POST,OPTIONS","Access-Control-Allow-Headers":"Content-Type,Authorization,Cookie"};if(e.httpMethod==="OPTIONS")return{statusCode:200,headers:o,body:""};if(e.httpMethod==="POST"){let{accessToken:s,idToken:i}=JSON.parse(e.body||"{}");return!s||!i?{statusCode:400,headers:o,body:JSON.stringify({message:"Missing required tokens"})}:{statusCode:200,headers:o,multiValueHeaders:{"Set-Cookie":[`accessToken=${s}; Path=/; HttpOnly; Secure; SameSite=None`,`idToken=${i}; Path=/; HttpOnly; Secure; SameSite=None`]},body:JSON.stringify({success:!0})}}if(e.httpMethod==="GET"){let s=e.headers.Cookie||e.headers.cookie;return console.log("Cookies received:",s),s?{statusCode:200,headers:o,body:JSON.stringify({valid:!0})}:{statusCode:401,headers:o,body:JSON.stringify({message:"No access token found"})}}return{statusCode:404,headers:o,body:JSON.stringify({message:"Not found"})}};0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
