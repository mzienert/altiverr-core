"use strict";var n=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var d=Object.prototype.hasOwnProperty;var u=(s,e)=>{for(var r in e)n(s,r,{get:e[r],enumerable:!0})},l=(s,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of c(e))!d.call(s,t)&&t!==r&&n(s,t,{get:()=>e[t],enumerable:!(o=i(e,t))||o.enumerable});return s};var y=s=>l(n({},"__esModule",{value:!0}),s);var p={};u(p,{handler:()=>g});module.exports=y(p);var a={"Access-Control-Allow-Origin":"https://www.asaracing.live","Access-Control-Allow-Methods":"GET,POST,OPTIONS","Access-Control-Allow-Headers":"accept,accept-language,content-type,access-control-request-method,access-control-request-headers,origin,referer,user-agent","Access-Control-Allow-Credentials":"true","Access-Control-Max-Age":"300"},g=async s=>{if(s.httpMethod==="OPTIONS")return{statusCode:200,headers:a,body:""};try{if(s.resource==="/auth/manage-session/verify"){let o=s.headers.Cookie||s.headers.cookie;return{statusCode:200,headers:a,body:JSON.stringify({cookiesPresent:!!o,cookies:o?h(o):null})}}if(!s.body)return{statusCode:400,headers:a,body:JSON.stringify({message:"Missing request body"})};let{accessToken:e,idToken:r}=JSON.parse(s.body);return!e||!r?{statusCode:400,headers:a,body:JSON.stringify({message:"Missing required tokens"})}:{statusCode:200,headers:{...a,"Set-Cookie":[`accessToken=${e}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`,`idToken=${r}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`].join("; ")},body:JSON.stringify({success:!0})}}catch(e){return console.error("Error:",e),{statusCode:500,headers:a,body:JSON.stringify({message:"Internal server error"})}}};function h(s){return s.split(";").map(e=>e.trim()).reduce((e,r)=>{let[o,t]=r.split("=");return e[o]=t,e},{})}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
