"use strict";var a=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var d=(o,e)=>{for(var s in e)a(o,s,{get:e[s],enumerable:!0})},u=(o,e,s,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of c(e))!l.call(o,t)&&t!==s&&a(o,t,{get:()=>e[t],enumerable:!(r=i(e,t))||r.enumerable});return o};var y=o=>u(a({},"__esModule",{value:!0}),o);var m={};d(m,{handler:()=>g});module.exports=y(m);var n={"Access-Control-Allow-Origin":"https://www.asaracing.live","Access-Control-Allow-Methods":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Credentials":"true","Access-Control-Max-Age":"300"},g=async o=>{console.log("Lambda started"),console.log("Event:",JSON.stringify(o,null,2)),process.on("uncaughtException",e=>{console.error("Uncaught Exception:",e)}),process.on("unhandledRejection",e=>{console.error("Unhandled Rejection:",e)});try{if(o.httpMethod==="OPTIONS")return{statusCode:200,headers:n,body:""};if(o.resource==="/auth/manage-session/verify"){let r=o.headers.Cookie||o.headers.cookie;return{statusCode:200,headers:n,body:JSON.stringify({cookiesPresent:!!r,cookies:r?h(r):null})}}if(!o.body)return{statusCode:400,headers:n,body:JSON.stringify({message:"Missing request body"})};let{accessToken:e,idToken:s}=JSON.parse(o.body);return!e||!s?{statusCode:400,headers:n,body:JSON.stringify({message:"Missing required tokens"})}:{statusCode:200,headers:{...n,"Set-Cookie":[`accessToken=${e}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`,`idToken=${s}; HttpOnly; Secure; Path=/; SameSite=None; Max-Age=3600`].join("; ")},body:JSON.stringify({success:!0})}}catch(e){return console.error("Error in handler:",e),{statusCode:500,headers:n,body:JSON.stringify({message:"Internal server error",error:e instanceof Error?e.message:String(e)})}}finally{console.log("Lambda finished")}};function h(o){return o.split(";").map(e=>e.trim()).reduce((e,s)=>{let[r,t]=s.split("=");return e[r]=t,e},{})}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
